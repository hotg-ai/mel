sudo: true
language: rust
rust:
  - stable
  - beta
  - nightly
matrix:
  allow_failures:
    - rust: nightly
script:
  # travis default rust test script
  - cargo build --verbose
  - cargo test --verbose
  # benches use the test feature which is only available on nightly
  # run benches once per build to detect performance regressions
  - if [ "$TRAVIS_RUST_VERSION" = "nightly" ] ; then
     cargo bench --verbose;
    fi
# env:
#   global:
#     - secure: ""
# after success build rust documentation and push it to gh-pages branch
# only do this for the stable branch (once per build)
# after_success: |
#   if [ "$TRAVIS_RUST_VERSION" = "stable" ] ; then
#     cargo doc --no-deps && \
#     sudo pip install ghp-import && \
#     ghp-import -n target/doc && \
#     git push -qf https://${GITHUB_TOKEN}@github.com/${TRAVIS_REPO_SLUG}.git gh-pages
#   fi
